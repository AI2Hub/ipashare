version: '3'
services:
  mysql-super-signature:
    image: docker.io/mysql:5.7
    container_name: mysql-super-signature
    ports:
      - "3336:3306"
    command: [
        '--character-set-server=utf8mb4',
        '--collation-server=utf8mb4_unicode_ci'
    ]
    environment:
      MYSQL_DATABASE: db_super_signature
      MYSQL_ROOT_PASSWORD: 123456
      MYSQL_ROOT_HOST: '%'

  web:
    build: .
    image: super-signature:v3
    depends_on:
      - mysql-super-signature
    ports:
      - "8888:8888"
    volumes:
      - ./ios:/root/togettoyou/super-signature/ios
      - ./router/templates:/root/togettoyou/super-signature/router/templates
      - ./config.yaml:/root/togettoyou/super-signature/config.yaml
      - ./ios.csr:/root/togettoyou/super-signature/ios.csr
      - ./ios.key:/root/togettoyou/super-signature/ios.key
      - ./ssl.key:/root/togettoyou/super-signature/ssl.key
      - ./ssl.pem:/root/togettoyou/super-signature/ssl.pem

#  docker-compose up
#  浏览器访问 http://localhost:8888/swagger/index.html